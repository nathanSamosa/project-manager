generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("DATABASE_SHADOW")
}

model User {
    id          Int         @id @default(autoincrement())
    name        String      @unique
    email       String      @unique
    password    String
    projects     Project[]
    createdAt   DateTime    @default(now())
    updatedAt   DateTime    @updatedAt
}

model Project {
    id          Int         @id @default(autoincrement())
    title       String
    user        User        @relation(fields: [userId], references: [id])
    userId      Int
    tickets     Ticket[]
    kanbans     Kanban[]
    createdAt   DateTime     @default(now())
    updatedAt   DateTime     @updatedAt
}

model Ticket {
    id          Int         @id @default(autoincrement())
    project     Project      @relation(fields: [projectId], references: [id])
    projectId   Int
    kanban      Kanban?
    title       String
    description String
    urgency     String
    deadline    DateTime
    createdAt   DateTime     @default(now())
    updatedAt   DateTime     @updatedAt
}

model Kanban {
    id          Int         @id @default(autoincrement())
    project     Project     @relation(fields: [projectId], references: [id])
    projectId   Int
    ticket      Ticket      @relation(fields: [ticketId], references: [id])
    ticketId    Int
    title       String
    progress    String
    createdAt   DateTime     @default(now())
    updatedAt   DateTime     @updatedAt
}